<HeadLayout/>

<NyprOHeader
  class={{if (or
    (eq this.target.currentRouteName 'article.index') (eq this.target.currentRouteName 'article.gallery'))
    'c-main-header--article'}}
  @floatLandmark={{headerLandmark}}
  @donateURL={{DONATE_URL}}
  as |header|>

  <header.leaderboard>
    <picture>
      <source media="(min-width: 750px)" srcset="https://tpc.googlesyndication.com/simgad/3866766746825522936">
      <img src="https://s0.2mdn.net/5188901/TINCUP_OUTSIDEONLINE_300x50.jpg" alt="">
    </picture>
  </header.leaderboard>

  <header.menu as |menu|>
    <menu.branding>
      {{#link-to 'index'}}
        <NyprASvg @icon='gothamist-logo'/>
      {{/link-to}}
    </menu.branding>

    <menu.primaryNav @navItems={{model.primaryNav}}/>
    <menu.secondaryNav @navItems={{model.secondaryNav}}/>
  </header.menu>

  <header.left
    class={{if header.rules.stackLogo 'c-main-header--emphasis'}}
    as |left|>
    <left.branding>
      {{#link-to 'index'}}
        {{#if header.rules.stackLogo}}
          <NyprASvg @icon='gothamist-logo--stacked'/>
        {{else}}
          <NyprASvg @icon='gothamist-logo'/>
        {{/if}}
      {{/link-to}}
    </left.branding>

    {{#if header.rules.headline}}
      <left.headline data-test-top-headline>
        {{{header.rules.headline}}}
      </left.headline>
    {{/if}}

  </header.left>

  {{#if header.rules.nav}}
    <header.nav @navItems={{model.primaryNav}} data-test-top-nav/>
  {{/if}}

  <header.right as |right|>
    {{#if header.rules.share}}
      <NyprMShareTools class="c-main-header__share" @label='Share' as |tools|>
        <tools.share @service='facebook'/>
        <tools.share @service='twitter' @params={{hash text=model.title}}/>
        <tools.share @service='reddit' @params={{hash url=model.permalink title=model.title}}/>
        <tools.share @service='email' @params={{hash body=(concat model.title ' - ' model.permalink)}}/>
      </NyprMShareTools>
    {{/if}}

    {{#if header.rules.donate}}
      <NyprAButton class='c-main-header__donate o-button--sm' @url={{DONATE_URL}}>
        Donate
      </NyprAButton>
    {{/if}}

    {{#if header.rules.search}}
      <right.search as |search|>
        <search.open/>
        <search.form @search={{action this.search}}/>
      </right.search>
    {{/if}}

    {{#if header.rules.close}}
      <NyprAButton @blank={{true}} @onclick={{header.rules.close}} class="u-padding--half">
        <NyprASvg @icon='close' class='c-main-header__close'/>
      </NyprAButton>
    {{/if}}

  </header.right>

</NyprOHeader>

<main class={{concat "c-main " this.mainRouteClasses}}>
  {{outlet}}
</main>

<NyprOFooter as |footer|>
  <footer.slogan>
    <p>
      A website about New York.
    </p>
  </footer.slogan>

  <footer.nav @navItems={{model.secondaryNav}}/>

  <footer.signup>
    <NyprMNewsletter as |newsletter|>
      <newsletter.graphic>
        <NyprASvg @icon='party-confetti'/>
      </newsletter.graphic>

      <newsletter.blurb>
        Sign Up Today
      </newsletter.blurb>

      <newsletter.legal/>
    </NyprMNewsletter>

  </footer.signup>

</NyprOFooter>
